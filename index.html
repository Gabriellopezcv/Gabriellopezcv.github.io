<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba de Conexión</title>
    <style>
        /* Estilos básicos para que sea legible */
        body { font-family: sans-serif; background-color: #f0f0f0; }
        #output {
            white-space: pre-wrap; /* Para que el texto no se salga */
            word-wrap: break-word;
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 15px;
            margin-top: 15px;
            min-height: 100px;
        }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>

    <h1>Prueba de Carga de Datos</h1>
    <p>Intentando cargar datos desde: <strong><span id="url-span"></span></strong></p>
    <p>Resultado:</p>
    
    <div id="output">Cargando...</div>

    <script>
        // La URL de datos. La misma que antes.
        const urlDeDatos = 'https://cdn.jsdelivr.net/gh/TechForPalestine/palestine-datasets@main/data/gaza_daily_martyrs_2023_2024.csv';

        // Poner la URL en el párrafo de arriba para que se vea
        document.getElementById('url-span').textContent = urlDeDatos;
        
        const outputDiv = document.getElementById('output');

        // Intentamos hacer la petición fetch
        fetch(urlDeDatos)
            .then(response => {
                // Primero, comprobamos si la respuesta del servidor es buena (OK = estatus 200)
                if (!response.ok) {
                    // Si no es buena, creamos un error personalizado para capturarlo después
                    throw new Error(`Error de red. El servidor respondió con estatus: ${response.status} (${response.statusText})`);
                }
                // Si la respuesta es buena, la convertimos a texto
                return response.text();
            })
            .then(data => {
                // Si todo ha ido bien, mostramos un trozo de los datos en el div
                outputDiv.textContent = '¡ÉXITO! Se han cargado los datos.\n\nAquí tienes las primeras 500 letras:\n\n' + data.substring(0, 500) + '...';
            })
            .catch(error => {
                // Si en algún punto hubo un error, lo mostramos aquí
                outputDiv.classList.add('error');
                outputDiv.textContent = 'FALLO LA PRUEBA.\n\nError: ' + error.message + '\n\nEsto confirma que tu navegador o tu red están bloqueando la conexión con el servidor de datos al abrir el archivo de forma local (file://).';
            });
    </script>

</body>
</html>